---
doc_type: nonfunctional_test_plan
version: "{{VERSION}}"
status: "{{STATUS}}"
updated_at: "{{UPDATED_AT}}"
owners:
  - "{{OWNER_EMAIL}}"
tags:
  - "テスト"
  - "非機能テスト"
  - "パフォーマンス"
  - "セキュリティ"
coverage:
  nfr: []
---

# 非機能テスト計画書

---

## 目次

1. [非機能テスト方針](#非機能テスト方針)
2. [パフォーマンステスト](#パフォーマンステスト)
3. [セキュリティテスト](#セキュリティテスト)
4. [アクセシビリティテスト](#アクセシビリティテスト)
5. [互換性テスト](#互換性テスト)
6. [NFR合否判定基準](#nfr合否判定基準)
7. [テスト結果報告テンプレート](#テスト結果報告テンプレート)
8. [関連ドキュメント](#関連ドキュメント)
9. [変更履歴](#変更履歴)

---

## 非機能テスト方針

### 対象 NFR カテゴリ

| カテゴリ | プレフィックス | テスト実施 | 優先度 |
|---------|--------------|-----------|--------|
| パフォーマンス | NFR-PERF | 必須 | High |
| セキュリティ | NFR-SEC | 必須 | High |
| 可用性 | NFR-AVL | 条件付き | Medium |
| スケーラビリティ | NFR-SCL | 条件付き | Medium |
| アクセシビリティ | NFR-ACC | 推奨 | Medium |
| 互換性 | NFR-CMP | 推奨 | Low |
| 保守性 | NFR-MNT | コードレビューで確認 | Low |
| 運用 | NFR-OPR | 運用手順書で確認 | Low |

### テスト環境要件

| 項目 | 要件 |
|------|------|
| 環境 | 本番同等構成（スペック・ネットワーク・データ量） |
| データ量 | 本番想定の {{DATA_SCALE}} 以上 |
| 独立性 | 他テストの影響を受けない独立環境 |
| モニタリング | CPU/メモリ/ネットワーク/ディスクI/O のリアルタイム監視 |
| 再現性 | 同一条件での再実行が可能であること |

---

## パフォーマンステスト

### 負荷テスト

#### 概要

| 項目 | 内容 |
|------|------|
| 目的 | 想定負荷時のレスポンスタイム・スループットが目標値を満たすことを検証 |
| ツール | {{LOAD_TEST_TOOL}} |
| 実施環境 | {{LOAD_TEST_ENV}} |

#### テストシナリオ

| シナリオID | シナリオ名 | 同時ユーザー数 | 実行時間 | 対象API |
|-----------|-----------|--------------|----------|---------|
| LT-{{ID}} | {{SCENARIO_NAME}} | {{CONCURRENT_USERS}} | {{DURATION}} | {{TARGET_API}} |

#### 目標値

| 指標 | 目標値 | 測定方法 |
|------|--------|----------|
| レスポンスタイム（P50） | {{P50_TARGET}} | {{MEASUREMENT}} |
| レスポンスタイム（P95） | {{P95_TARGET}} | {{MEASUREMENT}} |
| レスポンスタイム（P99） | {{P99_TARGET}} | {{MEASUREMENT}} |
| スループット | {{THROUGHPUT_TARGET}} req/s | {{MEASUREMENT}} |
| エラー率 | {{ERROR_RATE_TARGET}} 以下 | エラーレスポンス数 / 総リクエスト数 |

### ストレステスト

#### 概要

| 項目 | 内容 |
|------|------|
| 目的 | システムの限界値を特定し、過負荷時の劣化挙動を確認 |
| ツール | {{STRESS_TEST_TOOL}} |
| 実施環境 | {{STRESS_TEST_ENV}} |

#### テストシナリオ

| シナリオID | シナリオ名 | 負荷パターン | 最大ユーザー数 | 段階 |
|-----------|-----------|------------|--------------|------|
| ST-{{ID}} | {{SCENARIO_NAME}} | {{LOAD_PATTERN}} | {{MAX_USERS}} | {{RAMP_UP_STEPS}} |

#### 確認項目

| 確認項目 | 判定基準 |
|---------|----------|
| 限界ユーザー数 | レスポンスタイムが目標値を超える閾値を特定 |
| 劣化挙動 | グレースフルデグラデーション（段階的劣化）が機能すること |
| 回復性 | 負荷除去後、正常なレスポンスタイムに復帰すること |
| エラーハンドリング | 過負荷時に適切なエラーレスポンス（503等）を返すこと |

### 容量テスト

#### 概要

| 項目 | 内容 |
|------|------|
| 目的 | 大量データ時のパフォーマンス低下がないことを検証 |
| ツール | {{CAPACITY_TEST_TOOL}} |
| 実施環境 | {{CAPACITY_TEST_ENV}} |

#### テストシナリオ

| シナリオID | シナリオ名 | データ量 | 同時ユーザー数 | 確認指標 |
|-----------|-----------|---------|--------------|----------|
| CT-{{ID}} | {{SCENARIO_NAME}} | {{DATA_VOLUME}} | {{CONCURRENT_USERS}} | {{METRICS}} |

#### データ量パターン

| パターン | レコード数 | 用途 |
|---------|-----------|------|
| 初期 | {{INITIAL_RECORDS}} | ローンチ時の想定データ量 |
| 1年後 | {{1Y_RECORDS}} | 1年運用後の想定データ量 |
| 3年後 | {{3Y_RECORDS}} | 3年運用後の想定データ量 |
| 限界値 | {{MAX_RECORDS}} | パフォーマンス劣化が顕著になるデータ量 |

---

## セキュリティテスト

### OWASP Top 10 チェック

| # | 脆弱性カテゴリ | テスト方法 | ツール | 対象 | ステータス |
|---|--------------|-----------|--------|------|-----------|
| A01 | アクセス制御の不備 | 認可バイパステスト、IDOR テスト | {{TOOL}} | 全 API エンドポイント | {{STATUS}} |
| A02 | 暗号化の失敗 | TLS 設定確認、暗号化アルゴリズム検証 | {{TOOL}} | 通信・保存データ | {{STATUS}} |
| A03 | インジェクション | SQLi、XSS、コマンドインジェクション | {{TOOL}} | 入力フォーム、API | {{STATUS}} |
| A04 | 安全でない設計 | 脅威モデリング、設計レビュー | 手動 | アーキテクチャ全体 | {{STATUS}} |
| A05 | セキュリティ設定ミス | セキュリティヘッダー、デフォルト設定確認 | {{TOOL}} | サーバー設定 | {{STATUS}} |
| A06 | 脆弱なコンポーネント | 依存関係スキャン | {{TOOL}} | package.json | {{STATUS}} |
| A07 | 認証の不備 | ブルートフォース、セッション管理テスト | {{TOOL}} | 認証エンドポイント | {{STATUS}} |
| A08 | ソフトウェアとデータの整合性の不備 | CI/CD パイプライン検証 | {{TOOL}} | デプロイフロー | {{STATUS}} |
| A09 | セキュリティログと監視の不備 | ログ出力確認、アラート設定検証 | {{TOOL}} | ログ基盤 | {{STATUS}} |
| A10 | SSRF | SSRF テスト | {{TOOL}} | 外部連携エンドポイント | {{STATUS}} |

### SAST（静的アプリケーションセキュリティテスト）

| 項目 | 内容 |
|------|------|
| ツール | {{SAST_TOOL}} |
| 実行タイミング | CI/CD パイプライン（PR 作成時） |
| 対象 | ソースコード全体 |
| 判定基準 | Critical/High の脆弱性ゼロ |

### DAST（動的アプリケーションセキュリティテスト）

| 項目 | 内容 |
|------|------|
| ツール | {{DAST_TOOL}} |
| 実行タイミング | ステージング環境デプロイ後 |
| 対象 | 全公開エンドポイント |
| 判定基準 | Critical/High の脆弱性ゼロ |

### 依存関係脆弱性スキャン

| 項目 | 内容 |
|------|------|
| ツール | {{DEPENDENCY_SCAN_TOOL}} |
| 実行タイミング | 毎日（CI/CD + 定期スケジュール） |
| 対象 | package.json, package-lock.json |
| 判定基準 | Critical の脆弱性ゼロ、High は対応計画あり |

---

## アクセシビリティテスト

### 準拠レベル

| 項目 | 内容 |
|------|------|
| 準拠基準 | WCAG 2.1 {{WCAG_LEVEL}} |
| 対象ページ | {{TARGET_PAGES}} |
| テストツール | {{A11Y_TOOL}} |

### チェック項目

| カテゴリ | チェック項目 | 判定基準 | ツール |
|---------|------------|----------|--------|
| 知覚可能 | 画像の代替テキスト | 全画像に alt 属性あり | {{TOOL}} |
| 知覚可能 | 色のコントラスト比 | {{CONTRAST_RATIO}} 以上 | {{TOOL}} |
| 操作可能 | キーボード操作 | 全機能がキーボードのみで操作可能 | 手動 |
| 操作可能 | フォーカス管理 | フォーカス順序が論理的 | 手動 |
| 理解可能 | ラベルの関連付け | 全フォーム要素にラベルあり | {{TOOL}} |
| 理解可能 | エラーメッセージ | エラー箇所と修正方法が明示 | 手動 |
| 堅牢 | セマンティック HTML | 適切な HTML 要素の使用 | {{TOOL}} |
| 堅牢 | ARIA 属性 | 適切な ARIA ロール・属性の使用 | {{TOOL}} |

### スクリーンリーダーテスト

| 項目 | 内容 |
|------|------|
| 対象スクリーンリーダー | {{SCREEN_READERS}} |
| テスト対象 | 主要ユーザーフロー |
| 判定基準 | スクリーンリーダーで全フローが完遂可能 |

---

## 互換性テスト

### ブラウザマトリクス

| ブラウザ | バージョン | OS | 優先度 | ステータス |
|---------|-----------|-----|--------|-----------|
| Chrome | 最新 + 1つ前 | Windows / macOS | High | {{STATUS}} |
| Firefox | 最新 + 1つ前 | Windows / macOS | Medium | {{STATUS}} |
| Safari | 最新 + 1つ前 | macOS / iOS | High | {{STATUS}} |
| Edge | 最新 + 1つ前 | Windows | Medium | {{STATUS}} |

### デバイスマトリクス

| デバイス | 画面サイズ | OS | 優先度 | ステータス |
|---------|-----------|-----|--------|-----------|
| iPhone（最新世代） | {{SCREEN_SIZE}} | iOS {{VERSION}} | High | {{STATUS}} |
| iPhone（1世代前） | {{SCREEN_SIZE}} | iOS {{VERSION}} | Medium | {{STATUS}} |
| iPad | {{SCREEN_SIZE}} | iPadOS {{VERSION}} | Medium | {{STATUS}} |
| Android スマートフォン | {{SCREEN_SIZE}} | Android {{VERSION}} | High | {{STATUS}} |
| Android タブレット | {{SCREEN_SIZE}} | Android {{VERSION}} | Low | {{STATUS}} |
| デスクトップ（FHD） | 1920x1080 | Windows / macOS | High | {{STATUS}} |
| デスクトップ（4K） | 3840x2160 | Windows / macOS | Low | {{STATUS}} |

### レスポンシブブレークポイント

| ブレークポイント | 画面幅 | 確認内容 |
|----------------|--------|----------|
| モバイル | {{MOBILE_BP}} 以下 | レイアウト崩れ、タッチ操作、フォント可読性 |
| タブレット | {{TABLET_BP}} | レイアウト切替、ナビゲーション変更 |
| デスクトップ | {{DESKTOP_BP}} 以上 | フル機能表示、サイドバー表示 |

---

## NFR合否判定基準

### 判定基準一覧

| NFR-ID | カテゴリ | 目標値 | 測定方法 | 合否基準 | ツール | テスト環境 |
|--------|---------|--------|----------|---------|--------|-----------|
| {{NFR_ID}} | {{CATEGORY}} | {{TARGET}} | {{MEASUREMENT}} | {{PASS_CRITERIA}} | {{TOOL}} | {{ENV}} |

### パフォーマンス判定基準

| NFR-ID | 指標 | 目標値 | 合格条件 | 不合格条件 |
|--------|------|--------|---------|-----------|
| {{NFR_ID}} | レスポンスタイム P95 | {{TARGET}} | 目標値以下 | 目標値の {{THRESHOLD}} 倍超過 |
| {{NFR_ID}} | スループット | {{TARGET}} req/s | 目標値以上 | 目標値の {{THRESHOLD}} 未満 |
| {{NFR_ID}} | エラー率 | {{TARGET}} 以下 | 目標値以下 | 目標値超過 |

### セキュリティ判定基準

| NFR-ID | 指標 | 合格条件 | 不合格条件 |
|--------|------|---------|-----------|
| {{NFR_ID}} | OWASP Top 10 | Critical/High ゼロ | Critical/High が 1件以上 |
| {{NFR_ID}} | 依存関係脆弱性 | Critical ゼロ | Critical が 1件以上 |
| {{NFR_ID}} | SAST | Critical/High ゼロ | Critical/High が 1件以上 |

### アクセシビリティ判定基準

| NFR-ID | 指標 | 合格条件 | 不合格条件 |
|--------|------|---------|-----------|
| {{NFR_ID}} | WCAG 2.1 {{WCAG_LEVEL}} 準拠 | 全チェック項目 PASS | Critical 項目に FAIL あり |
| {{NFR_ID}} | 自動テストスコア | {{A11Y_SCORE}} 以上 | {{A11Y_SCORE}} 未満 |

---

## テスト結果報告テンプレート

### 非機能テスト結果報告書

```markdown
---
doc_type: nonfunctional_test_report
version: "{{VERSION}}"
test_date: "{{TEST_DATE}}"
tester: "{{TESTER}}"
environment: "{{ENVIRONMENT}}"
---

# 非機能テスト結果報告書

## 概要

| 項目 | 内容 |
|------|------|
| テスト実施日 | {{TEST_DATE}} |
| テスト環境 | {{ENVIRONMENT}} |
| テスト実施者 | {{TESTER}} |
| 総合判定 | {{OVERALL_RESULT}} |

## パフォーマンステスト結果

| 指標 | 目標値 | 実測値 | 判定 |
|------|--------|--------|------|
| {{METRIC}} | {{TARGET}} | {{ACTUAL}} | {{RESULT}} |

## セキュリティテスト結果

| テスト項目 | 結果 | 検出事項 | 対応状況 |
|-----------|------|---------|----------|
| {{TEST_ITEM}} | {{RESULT}} | {{FINDING}} | {{ACTION}} |

## アクセシビリティテスト結果

| チェック項目 | 結果 | 検出事項 | 対応状況 |
|------------|------|---------|----------|
| {{CHECK_ITEM}} | {{RESULT}} | {{FINDING}} | {{ACTION}} |

## 互換性テスト結果

| ブラウザ/デバイス | 結果 | 検出事項 |
|-----------------|------|---------|
| {{BROWSER_DEVICE}} | {{RESULT}} | {{FINDING}} |

## 検出事項サマリー

| 重大度 | 件数 | 対応済 | 未対応 |
|--------|------|--------|--------|
| Critical | {{COUNT}} | {{RESOLVED}} | {{OPEN}} |
| Major | {{COUNT}} | {{RESOLVED}} | {{OPEN}} |
| Minor | {{COUNT}} | {{RESOLVED}} | {{OPEN}} |

## 所見・推奨事項

{{OBSERVATIONS}}
```

---

## 関連ドキュメント

| ドキュメント | リンク |
|-------------|--------|
| 要件一覧（NFR） | [user-stories.md](../../docs/requirements/user-stories.md) |
| アーキテクチャ設計書 | [architecture.md](../../docs/03_architecture/architecture.md) |
| テスト戦略書 | [test_strategy.md](./test_strategy.md) |
| テスト計画書 | [test_plan.md](./test_plan.md) |
| トレーサビリティマトリクス | [traceability_matrix.md](./traceability_matrix.md) |
| 運用手順書 | [operations.md](./operations.md) |

---

## 変更履歴

| 日付 | バージョン | 変更者 | 変更内容 |
|------|-----------|--------|----------|
| {{DATE}} | 1.0.0 | {{AUTHOR}} | 初版作成 |
