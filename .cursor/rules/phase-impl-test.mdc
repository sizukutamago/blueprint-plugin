---
description: "Blueprint design workflow - test design phase. Apply when creating or editing test strategy, test plan, traceability matrix, or non-functional test plan."
globs: "docs/07_implementation/test_strategy.md,docs/07_implementation/test_plan.md,docs/07_implementation/traceability_matrix.md,docs/07_implementation/nonfunctional_test_plan.md,docs/requirements/**,workflow-state/task_plan.md"
alwaysApply: false
---
# Test Design Phase (Cursor)

## 仕様参照

まず @core/phases/impl-test.md を読み込み、内容を完全に理解してください。
入力要件、出力ファイル、必須セクション、品質基準は全てこの仕様に従うこと。

## Cursor 固有の実行手順

1. workflow-state/task_plan.md を読み、前提フェーズの完了を確認する
   - architecture-skeleton: complete
   - database: complete
   - api: complete
   - design-detail: complete
2. 全設計書を読み込む
   - docs/requirements/user-stories.md（FR/NFR 一覧）
   - docs/03_architecture/architecture.md（技術スタック）
   - docs/04_data_structure/data_structure.md（エンティティ）
   - docs/05_api_design/api_design.md（API 仕様）
   - docs/06_screen_design/screen_list.md（画面一覧）
3. docs/project-context.yaml から NFR 測定可能性データを取得
   - blackboard.decisions.nfr_measurability
4. @core/phases/impl-test.md の「ワークフロー」セクションの手順に従って設計を実施
5. docs/07_implementation/test_strategy.md を生成
6. docs/07_implementation/test_plan.md を生成
7. docs/07_implementation/traceability_matrix.md を生成
   - 全 FR-ID が含まれていることを検証
8. docs/07_implementation/nonfunctional_test_plan.md を生成
   - 全 NFR-ID に測定方法と合否基準があることを検証
9. workflow-state/task_plan.md の impl-test ステータスを `complete` に更新

## 状態管理

タスク開始前に必ず `workflow-state/task_plan.md` を読み、現在の進捗を確認すること。
タスク完了後は必ず `task_plan.md` のステータスを更新すること。

## 注意事項

- このフェーズは impl-standards, impl-ops と並列実行可能（Wave C）
- テスト戦略のツール選定は architecture.md の技術スタックと整合させること
- トレーサビリティマトリクスは全 FR-ID をカバーすること（漏れがあれば WARNING）
- NFR 測定可能性データが不在の場合は汎用的な測定基準で代替し、レビューで指摘する
